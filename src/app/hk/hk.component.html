<div class="row justify-content-md-center" style="margin-top: 3%;">

  <div class="col-2" style="margin-top: 2%">
    <div class="fixed animated fadeInLeft">
      <mat-list>
        <h3 mat-subheader>Select Floor</h3>
          <a mdbWavesEffect mat-list-item *ngFor="let floor of floors; let i = index"
             class="floor"
             [ngClass]="{'active': currentFloor === floor.data}"
             (click)="changeFloor(floor.data)">{{floor.label | uppercase}}</a>
      </mat-list>
      <hr class="my-4">
      <mat-list>
        <h3 mat-subheader>Select Status</h3>
        <a mdbWavesEffect mat-list-item mdbBtn *ngFor="let status of statuses; let i = index" (click)="setStatus(i)">
          {{status}} <span class="badge badge-danger ml-2">{{counts[i]}}</span>
        </a>
      </mat-list>
    </div>
  </div>

  <div class="col-7">
    <hr class="my-4">

    <mdb-card class="text-center">
      <mdb-card-body>
        <mdb-card-title>
          <h3>{{currentType['label'] | uppercase}}</h3>
        </mdb-card-title>
        <mdb-card-text>
          {{currentMonth | uppercase}} {{currentYear}}
        </mdb-card-text>
      </mdb-card-body>
    </mdb-card>

    <hr class="my-4">
    <mat-tab-group (selectedTabChange)="changeTab($event)">
      <mat-tab color="primary" *ngFor="let month of months[currentType['index']]" label="{{month | uppercase}}">

        <hr class="my-4">
        <span><input (keyup)="applyFilter($event.target.value)" id="search" name="search" placeholder="Search... By Room No."></span>
        <hr class="my-3">

        <div class="table-container">
          <mat-table [dataSource]="dataSource" matSort (matSortChange)="sortData($event)" class="mat-elevation-z8 animated fadeInUp">
            <ng-container *ngFor="let value of displayedColumns" matColumnDef="{{value}}">
              <mat-header-cell mdbWavesEffect class="z-depth-1-half" *matHeaderCellDef mat-sort-header> {{value | uppercase}}</mat-header-cell>
              <mat-cell *matCellDef="let element">
                <p *ngIf="value === 'status'" [ngClass]="{'green-text': element.status ==='clean', 'red-text': element.status === 'not done'}" class="font-weight-bold">
                  <i *ngIf="element.status === 'clean'; else notDone" class="fas fa-check-circle"></i>
                  <ng-template #notDone><i class="fas fa-times-circle"></i></ng-template>
                </p>
                {{value === 'status' ? '' : element[value]}}
                <div class="view overlay">
                  <button mdbBtn class="edit-button z-depth-1-half" type="button"
                          (click)="changeRoomStatus(element)"
                          *ngIf="value === 'edit'"
                          [ngClass]="{'blue-gradient': element.status=== 'not done', 'peach-gradient': element.status === 'clean'}"
                          mdbWavesEffect>
                    <i *ngIf="element.status === 'not done'" class="far fa-check-square"></i>
                    <i *ngIf="element.status === 'clean'" class="fa fa-undo" aria-hidden="true"></i>
                  </button>
                </div>
              </mat-cell>

            </ng-container>
            <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
            <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
          </mat-table>
        </div>
      </mat-tab>
    </mat-tab-group>
    <mat-progress-spinner  mode="indeterminate" *ngIf="showSpinner"></mat-progress-spinner>
  </div>

  <div class="col-1" style="margin-top: 3%;position: relative; right: 0;">
    <div class="fixed animated fadeInRight">
      <mat-list>
        <h3 mat-subheader>Select Type and Year</h3>
        <mat-menu #typeMenu="matMenu">
          <button mat-menu-item *ngFor="let type of types" (click)="setType(type)">{{type.label}}</button>
        </mat-menu>
        <span>
          <div class="btn-group" mdbDropdown>
          <button type="button" mdbBtn color="primary" class="waves-light" mdbWavesEffect >{{currentType['label'] | uppercase}}</button>
          <button type="button" mdbDropdownToggle mdbBtn color="primary" class="dropdown-toggle dropdown-toggle-split px-3 waves-light"
                  mdbWavesEffect [matMenuTriggerFor]="typeMenu"></button>
          </div>
        </span>
        <br>
        <br>
        <mat-menu #yearMenu="matMenu">
          <button mat-menu-item *ngFor="let year of years" (click)="setCurrentYear(year)">{{year}}</button>
        </mat-menu>
        <span>
          <div class="btn-group" mdbDropdown>
          <button type="button" mdbBtn color="secondary" class="waves-light" mdbWavesEffect >{{currentYear}}</button>
          <button type="button" mdbDropdownToggle mdbBtn color="secondary" class="dropdown-toggle dropdown-toggle-split px-3 waves-light"
                  mdbWavesEffect [matMenuTriggerFor]="yearMenu"></button>
          </div>
        </span>
      </mat-list>
    </div>
  </div>
</div>
