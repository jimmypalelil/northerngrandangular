



<div class="container" style="margin-top: 5%;">
  <hr class="my-4">
  <span class="lost-title">
      <img class="lost-image" src="static/app/assets/images/lost.png">
    <h5 class="lost-title-text display-5">Lost and Found</h5>
  </span>
  <hr class="my-4">
  <mat-accordion>
    <mat-expansion-panel  [expanded]="panelOpened" (opened)="setPanelOpen(true)">
      <mat-expansion-panel-header>
        <mat-panel-title>
          <p><i class="fas fa-plus-circle"></i> New Item</p>
        </mat-panel-title>
        <mat-panel-description>
          Make a new Item entry
        </mat-panel-description>
      </mat-expansion-panel-header>
      <form>
        <mat-form-field>
          <input matInput placeholder="Room Number" name="roomNo" [(ngModel)]="newRoom" required>
        </mat-form-field>

        <mat-form-field>
          <input matInput placeholder="Item Description" name="itemDesc" [(ngModel)]="newItemDesc" required>
        </mat-form-field>

        <mat-form-field>
          <input matInput placeholder="Date Found" name="dateFound" [matDatepicker]="picker" (focus)="picker.open()" readonly [(ngModel)]="newDate" required>
        </mat-form-field>
        <mat-datepicker #picker></mat-datepicker>

        <mat-action-row>
          <!--"Add" button-->
          <button mat-mini-fab color="primary" (click)="addItem()">
            <i class="fa fa-plus" aria-hidden="true"></i>
          </button>
        </mat-action-row>
      </form>
    </mat-expansion-panel>
  </mat-accordion>
  <hr class="my-4">
  <span><input matInput (keyup)="applyFilter($event.target.value)" id="search" name="search" placeholder="Search... By room number, item or date"></span>
  <hr class="my-3">

  <mat-tab-group (selectedTabChange)="changeTab($event)" class="animated fadeInUp">
    <mat-tab color="primary" *ngFor="let tab of tabList" label="{{tab | uppercase}}">
      <hr class="my-4">
      <mat-table [dataSource]="dataSource" matSort (matSortChange)="sortData($event)" class="mat-elevation-z8 lost-table">
        <ng-container *ngFor="let value of displayedColumns" matColumnDef="{{value}}">
          <mat-header-cell mdbWavesEffect *matHeaderCellDef mat-sort-header class="wow fadeInUp z-depth-1-half text-center" >{{value | uppercase}}</mat-header-cell>
          <mat-cell *matCellDef="let element" class="animated fadeInUp">
            {{value === 'date'|| value === 'return_date' || value === 'date_found' ? (element[value] | date) : (element[value] | uppercase)}}
            <button mdbBtn gradient="warm-flame" class="edit-button z-depth-3 email-button" *ngIf="value==='action'" (click)="sendItemInfo(element); frame.show()">
              <i class="fas fa-trash-alt"></i> <span> Delete</span>
            </button>
            <button mdbBtn gradient="tempting-azure" class="edit-button z-depth-3 email-button"
                    *ngIf="value==='action'" (click)="sendItemInfo(element); emailFrame.show()">
              <i class="far fa-envelope"></i> <span> Email Jennifer</span>
            </button>
            <button mdbBtn gradient="tempting-azure" class="edit-button z-depth-3 email-button"
                    *ngIf="value==='action'" (click)="sendItemInfo(element); returnFrame.show()">
              <i class="fas fa-gift"></i> <span> Return To Guest</span>
            </button>
          </mat-cell>
        </ng-container>
        <mat-header-row *matHeaderRowDef="displayedColumns" class="z-depth-3"></mat-header-row>
        <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
      </mat-table>
    </mat-tab>
  </mat-tab-group>
</div>

<div mdbModal #frame="mdbModal" class="modal fade left" id="frameModalTop" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Delete Item</h4>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="frame.hide()">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
        <div class="modal-body mx-3">

          <blockquote class="blockquote bq-warning" *ngIf="currentItem !== null">
            <p class="bq-title">Are you sure you wanna delete the following Item?</p>
            <p>{{currentItem.item_description | uppercase}} found in: {{currentItem.room_number}}</p>
          </blockquote>
        </div>
        <div class="modal-footer d-flex justify-content-center">
          <button mdbBtn color="default" class="waves-light btn btn-primary" (click)="frame.hide()" mdbWavesEffect>Cancel</button>
          <button mdbBtn color="default" class="waves-light btn btn-danger btn-rounded" color="danger" (click)="frame.hide();deleteLostItem()" mdbWavesEffect>Delete</button>
        </div>
      </div>
  </div>
</div>

<div mdbModal #emailFrame="mdbModal" class="modal fade left" id="deleteFrame" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Email Jennifer</h4>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="emailFrame.hide()">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">

        <blockquote class="blockquote bq-warning" *ngIf="currentItem !== null">
          <p class="bq-title">Are you sure you wanna Email Jennifer about the following Item?</p>
          <p>{{currentItem.item_description | uppercase}} found in: {{currentItem.room_number}}</p>
        </blockquote>
      </div>
      <div class="modal-footer d-flex justify-content-center">
        <button mdbBtn color="default" class="waves-light btn btn-primary" (click)="emailFrame.hide()" mdbWavesEffect>Cancel</button>
        <button mdbBtn color="default" class="waves-light btn btn-danger btn-rounded" color="danger"
                (click)="emailFrame.hide();sendEmail()" mdbWavesEffect>Confirm</button>
      </div>
    </div>
  </div>
</div>

<div mdbModal class="modal fade" #returnFrame="mdbModal" id="returnModal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Return Item</h4>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="returnFrame.hide()">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <mat-form-field>
          <mat-placeholder>
            <i class="fa fa-user prefix grey-text"></i> Guest Name
          </mat-placeholder>
          <input matInput type="text" name="guestName" autofocus [(ngModel)]="returnItem.guest_name" required>
        </mat-form-field>

        <mat-form-field>
          <mat-placeholder>
            <i class="fa fa-user prefix grey-text"></i> Room #
          </mat-placeholder>
          <input matInput type="text" name="room_no" [(ngModel)]="returnItem.room_number" required>
        </mat-form-field>

        <mat-form-field>
          <mat-placeholder>
            <i class="fa fa-user prefix grey-text"></i> Item Description
          </mat-placeholder>
          <input matInput type="text" name="itemDesc" [(ngModel)]="returnItem.item_description" required>
        </mat-form-field>

        <mat-form-field>
          <mat-placeholder>
            <i class="fa fa-user prefix grey-text"></i> Returned By
          </mat-placeholder>
          <input matInput type="text" name="returnedBy" [(ngModel)]="returnItem.returned_by" required>
        </mat-form-field>

        <mat-form-field>
          <mat-placeholder>
            <i class="fa fa-user prefix grey-text"></i> Return Date
          </mat-placeholder>
          <input matInput name="returnDate" [matDatepicker]="returnDatePicker"
                 (click)="returnDatePicker.open()" [(ngModel)]="returnItem.return_date" required>
          <mat-datepicker #returnDatePicker></mat-datepicker>
        </mat-form-field>

        <div>
        <mat-form-field>
          <mat-placeholder>
            <i class="fa fa-user prefix grey-text"></i> Comments

          </mat-placeholder>
          <textarea matInput type="text" name="comments" autofocus [(ngModel)]="returnItem.comments" ></textarea>
        </mat-form-field>
        </div>

      </div>
      <div class="modal-footer d-flex justify-content-center">
        <button class="btn btn-unique" (click)="returnedItem();returnFrame.hide()">Return<i class="fa fa-paper-plane-o ml-1"></i></button>
      </div>
    </div>
  </div>
</div>
